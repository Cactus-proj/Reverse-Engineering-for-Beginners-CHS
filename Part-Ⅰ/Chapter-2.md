# 第二章
# 最简单的函数

最简单的函数可能只需要返回一个常数值。
这有个例子：
清单 2.1: C/C++ 代码
```
int f()
{
	return 123;
};
```
让我们编译一下！ 

## 2.1 x86

下面是带优化的GCC和MSVC编译器在x86平台上的输出：
清单 2.2: 带优化的 GCC/MSVC (汇编输出)
```
f:
	mov 	eax, 123
	ret
```
这里只有两个函数：第一个把123放入EAX寄存器里，EAX通常被用作存放函数的返回值。第二个是RET,RET把控制权交给主调函数。

主调函数会从EAX里取出返回值。

## 2.2 ARM

在ARM平台上会有一点点区别。

清单 2.3: 带优化的 Keil 6/2013 (ARM mode) ASM 输出
```
f PROC
		MOV 	r0,#0x7b ; 123
		BX 		lr
		ENDP
```
ARM 用R0来储存函数的返回值，所以123被复制进R0.
放在
在ARM构架里返回值的地址不是保存在局部堆栈里，而是在连接寄存器里，